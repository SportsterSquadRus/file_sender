Данный репозиторий является результатом решения тестового задания.

Суть задачи:  
Создать клиент-серверное приложение состоящие из трех частей:

- Фронт – Авторизация пользователя, возможность создать нового пользователя с паролем. Основной экран: Отображает список загруженных на бэк файлов, визуализирует выбранный в таблице

- Бэк – получает от агента файлы .test, кладет содержимое в базу данных, отдает список фронту ведет базу пользователей.

- Агент – следит за указанной папкой на локальной машине, если находит в папке файлы формата .test, то отправляет их на сервер и говорит об этом в интерфейсе.



.test файлы случайно сгенерированные массивы формата x y z i где i – значение ячейки от 1 до 255. (не менее 9000 значений)

### Описание реализации

#### 1. Агент:  
Консольное приложение, находящееся в папке agent;
- Может располагаться в любом месте файловой системы;
- Проверяет папку test_files на наличие файлов с расширением .test;
- Запускается консольной командой python3 client.py;
- При вызове может принять ключ --u (Адрес расположения сервера, например example.ru. Значение по умолчанию: 127.0.0.1);
- При вызове может принять ключ --p (Порт сервера. Значение по умолчанию: 8000);
- При вызове может принять ключ --t (Периодичность проверки содержимого папки в секундах. Значение по умолчанию: 1 (одна секунда));
- Прерывает работу при нажатии сочетания клавиш ctrl+c.

После запуска агент в вечном цикле проверяет содержимое папки на наличие файлов, определяет md5 каждого из них на случай подмены файла на другой с аналогичным названием, сверяет получившийся список с аналогичным сохраненным после предыдущей итерации цикла и, в случае обнаружения новых файлов, отправляет их на сервер. После получения сервером файлов принимает подтверждение в виде сообщения.

### 2. Сервер  
Веб-приложение, выполняющее функции описанные в разделах задания "Фронт" и "Бэк".
 - Принимает файлы;
 - Сохраняет файлы на стороне сервера;
 - Сохраняет ссылку на файл в базе данных (не бинарное сохранение);
 - Распределяет хранящиеся в файле значения в базу данных;
 - Хранит таблицы, необходимые для создания связи файла и хранящихся значений в нем;
 - Осуществляет регистрацию и авторизацию пользователей;
 - Хранит базу пользователей;
 - Выдает информацию по REST API;
 - Выводит на главный экран список сохраненных в базе файлов;
 - Позволяет ознакомиться с хранящимися в файле данными в двух форматах  - оригинальное содержание файла и перечень значений из базы данных;
 - При прочтении значений из файла осуществляется их валидация. Невалидные значения значения приравниваются к единице.

### 3. Взаимодействие с сервером  
- 'upload/api/' url загрузки файла;
- 'api/list' url API вывода списка загруженных файлов;
- 'api/id' url вывода API с информацией о конкретном файле, где id - номер идентификатора файла в базе данных;
- 'admin/' url страницы авторизации администратора ресурса;
- 'upload/list/' url вывода страницы списка загруженных файлов;
- 'upload/id' url вывода информации о конкретном файле, где id - номер идентификатора файла в базе данных.

### 4. Рекомендации по проверке работоспособности   
- Установите docker-compose и все необходимые зависимости (формулировка задания подразумевает, что этот пункт уже выполнен);
- Скачайте репозиторий;
- Перенесите папку agent в любое иное место на жестком диске, отличное от первоначального расположения (пункт можно пропустить, если запуск будет проивзодиться не через Docker);
- Находясь в в папке сервера запустите его командой sudo docker-compose up;
- Находясь в папке агента запустите его командой python3 client.py (Предупреждение: агент уже содержит тестовый файл для отправки на сервер. Удалите его в случае необходимости).

